/* PlatformArchitecture module */
@import '../css/design-tokens.css';

.archSection {
    padding: var(--sc-section-padding-y) var(--sc-space-5) calc(var(--sc-space-8));
    max-width: var(--sc-max-width-content);
    margin: 0 auto;
}

.archTitle {
    text-align: center;
    font-size: var(--sc-heading-size);
    margin: 0 0 .6rem;
    font-weight: 800;
    letter-spacing: .4px;
    line-height: 1.1;
    background: linear-gradient(95deg, #fff, #c7d2fe 40%, #818cf8 70%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.archSubtitle {
    text-align: center;
    font-size: var(--sc-body-size);
    opacity: .85;
    margin: 0 0 var(--sc-space-7);
    max-width: 820px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.5;
    color: var(--sc-color-text-dim);
}

/* Facet buttons row below subtitle */
.facetRow {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: .55rem;
    margin: calc(var(--sc-space-5) * -1) 0 var(--sc-space-6);
    /* pull a bit closer to subtitle */
}

.facetBtn {
    background: var(--sc-color-bg-surface-alt);
    border: 1px solid var(--sc-color-border);
    padding: .45rem .85rem .5rem;
    border-radius: 999px;
    font-size: var(--sc-text-xs);
    letter-spacing: .8px;
    text-transform: uppercase;
    font-weight: 600;
    color: var(--sc-color-text-dim);
    cursor: pointer;
    transition: background var(--sc-dur-fast), color var(--sc-dur-fast), border-color var(--sc-dur-fast), box-shadow var(--sc-dur-fast);
    position: relative;
}

.facetBtn:hover:not(:disabled),
.facetBtn:focus-visible {
    color: var(--sc-color-text);
    border-color: var(--sc-color-border-accent);
    outline: none;
}

.facetBtnActive {
    background: linear-gradient(145deg, var(--sc-color-accent-fade), var(--sc-color-accent-strong));
    color: var(--sc-color-on-accent);
    border-color: var(--sc-color-accent-strong);
    box-shadow: 0 0 0 1px #6366f166, 0 2px 6px -2px rgba(0, 0, 0, .4);
}

html[data-theme='light'] .facetBtnActive {
    box-shadow: 0 0 0 1px rgba(79, 70, 229, .45), 0 2px 6px -2px rgba(0, 0, 0, .18);
}

.archGridWrapper {
    display: grid;
    grid-template-columns: 0.85fr 1.15fr;
    /* give more width to right panel */
    /* slightly smaller left panel */
    gap: 2.5rem;
    align-items: stretch;
    /* ensure equal heights */
}

@media (max-width: 1100px) {
    .archGridWrapper {
        grid-template-columns: 1fr;
    }
}

.diagramCard {
    background: linear-gradient(145deg, var(--sc-color-bg-surface), var(--sc-color-bg-surface-alt));
    border: 1px solid var(--sc-color-border);
    padding: var(--sc-space-7) var(--sc-space-5) var(--sc-space-7);
    border-radius: var(--sc-radius-lg);
    position: relative;
    overflow: hidden;
    box-shadow: var(--sc-elev-1);
    height: 100%;
    /* match rotating panel height */
    display: flex;
    flex-direction: column;
}

.layersGrid {
    display: grid;
    gap: 1rem;
}

.layerGroup {
    background: linear-gradient(180deg, var(--sc-color-bg-surface-alt), transparent 85%);
    border: 1px solid var(--sc-color-border);
    border-radius: var(--sc-radius-md);
    padding: 1rem 1rem 1.05rem;
    transition: transform var(--sc-dur-fast), box-shadow var(--sc-dur-fast), border-color var(--sc-dur-fast);
}

.layerGroup:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 18px -8px rgba(0, 0, 0, .35);
    border-color: var(--sc-color-border-accent);
}

.layerHeader {
    display: flex;
    align-items: center;
    gap: 0.55rem;
    margin: 0 0 0.55rem;
    font-size: 0.83rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 600;
    color: #a5b4fc;
}

/* Interactive variant when rendered as a button */
.layerHeaderBtn {
    display: flex;
    align-items: center;
    gap: .55rem;
    margin: 0 0 .55rem;
    font-size: 0.85rem;
    /* slightly larger */
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 600;
    color: var(--sc-color-accent);
    background: transparent;
    border: none;
    cursor: pointer;
    padding: .1rem .2rem;
    transition: color var(--sc-dur-fast), transform var(--sc-dur-fast);
}

.layerHeaderBtn:hover:not(:disabled),
.layerHeaderBtn:focus-visible {
    color: var(--sc-color-accent-strong);
    outline: 2px solid var(--sc-color-focus-ring);
    outline-offset: 2px;
    transform: translateY(-1px);
}

.servicesRow {
    display: flex;
    flex-wrap: wrap;
    gap: .6rem;
}

.servicePillBtn {
    background: var(--sc-color-bg-surface-alt);
    border: 1px solid var(--sc-color-border);
    padding: .46rem .78rem .48rem;
    /* slightly larger */
    border-radius: 20px;
    font-size: 0.8rem;
    /* slightly larger */
    font-weight: 500;
    line-height: 1;
    display: flex;
    gap: .4rem;
    align-items: center;
    color: var(--sc-color-text-dim);
    position: relative;
    cursor: pointer;
    transition: background var(--sc-dur-fast), color var(--sc-dur-fast), box-shadow var(--sc-dur-fast), border-color var(--sc-dur-fast), transform var(--sc-dur-fast);
}

.servicePillBtn:hover:not(:disabled),
.servicePillBtn:focus-visible {
    background: var(--sc-color-bg-surface);
    color: var(--sc-color-text);
    box-shadow: 0 0 0 2px #6366f155;
    transform: translateY(-1px);
}

.servicePill img {
    width: 18px;
    height: 18px;
}

/* Active / selected service pill */
.servicePillActive {
    background: linear-gradient(145deg, var(--sc-color-accent-fade), var(--sc-color-accent));
    color: var(--sc-color-on-accent);
    border-color: var(--sc-color-accent);
    box-shadow: 0 0 0 1px rgba(99, 102, 241, .5), 0 4px 10px -2px rgba(0, 0, 0, .35);
}

.servicePillActive:hover:not(:disabled),
.servicePillActive:focus-visible {
    background: linear-gradient(145deg, var(--sc-color-accent), var(--sc-color-accent-strong));
    color: var(--sc-color-on-accent);
}

/* Light theme readability adjustments */
html[data-theme='light'] .facetBtn {
    color: var(--sc-color-text);
    background: #ffffff;
}

html[data-theme='light'] .facetBtn:hover:not(:disabled),
html[data-theme='light'] .facetBtn:focus-visible {
    background: #ffffff;
}

html[data-theme='light'] .servicePillBtn {
    background: #ffffff;
    color: var(--sc-color-text);
    border-color: var(--sc-color-border);
}

html[data-theme='light'] .servicePillBtn:hover:not(:disabled),
html[data-theme='light'] .servicePillBtn:focus-visible {
    background: var(--sc-color-bg-surface-alt);
    color: var(--sc-color-text);
}

html[data-theme='light'] .servicePillActive {
    box-shadow: 0 0 0 1px rgba(79, 70, 229, .45), 0 4px 10px -2px rgba(0, 0, 0, .15);
}

.rotatingPanel {
    background: var(--sc-color-bg-surface);
    border: 1px solid var(--sc-color-border);
    border-radius: var(--sc-radius-lg);
    padding: var(--sc-space-6) var(--sc-space-5) var(--sc-space-6);
    height: 100%;
    display: flex;
    flex-direction: column;
    position: relative;
    box-shadow: var(--sc-elev-1);
}

.rightSplit {
    display: grid;
    grid-template-rows: auto auto;
    /* let content define height; avoids large empty space */
    gap: 1.2rem;
    height: 100%;
}

.rightCard {
    background: linear-gradient(145deg, var(--sc-color-bg-surface), var(--sc-color-bg-surface-alt));
    border: 1px solid var(--sc-color-border);
    border-radius: var(--sc-radius-md);
    padding: 1.25rem 1.25rem 1.1rem;
    display: flex;
    flex-direction: column;
}

.infoPane {
    /* top half (service overview) */
    contain: layout paint;
}

.implPane {
    /* bottom half (shieldcraft implementation) */
    contain: layout paint;
}

.iconStage {
    min-height: 56px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    margin-bottom: .4rem;
    padding-bottom: .2rem;
}

.iconStage img.selectionIcon {
    width: 56px;
    height: 56px;
    filter: drop-shadow(0 4px 10px #00000080);
    opacity: 0.95;
}

.rotationLabel {
    font-size: var(--sc-text-xs);
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--sc-color-text-faint);
    margin: 0 0 0.9rem;
    font-weight: 600;
}

.rotationContent {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    /* start at top to use space better */
}

/* Fade swap animation when content changes */
.fadeSwap {
    animation: fadeIn .5s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(6px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.selectionMeta {
    display: flex;
    align-items: center;
    gap: .55rem;
    margin: 0 0 .55rem;
    flex-wrap: wrap;
}

.selectionTag {
    background: var(--sc-color-bg-surface);
    border: 1px solid var(--sc-color-border);
    font-size: var(--sc-text-xs);
    text-transform: uppercase;
    letter-spacing: .8px;
    padding: .25rem .5rem .28rem;
    border-radius: var(--sc-radius-sm);
    color: var(--sc-color-accent);
    font-weight: 600;
}

.selectionName {
    font-size: var(--sc-text-sm);
    font-weight: 600;
    letter-spacing: .5px;
    color: var(--sc-color-text);
}

.selectionBlurb {
    font-size: var(--sc-text-xs);
    line-height: 1.4;
    margin: .7rem 0 0;
    color: var(--sc-color-text-dim);
}

.selectionHint {
    font-size: var(--sc-text-xs);
    opacity: .55;
    margin: .9rem 0 0;
}

.rotationHeadline {
    font-size: calc(var(--sc-text-lg) * 1.15);
    margin: 0.1rem 0 0.7rem;
    font-weight: 600;
    color: var(--sc-color-text);
}

.rotationBody {
    font-size: calc(var(--sc-text-sm) * 1.08);
    line-height: 1.55;
    opacity: 0.95;
    margin-bottom: .8rem;
}


.archNote {
    font-size: var(--sc-text-xs);
    opacity: 0.55;
    margin-top: 1.2rem;
    line-height: 1.3;
}

/* Embedded usage block inside lifecycle panel */
.usageBlockEmbedded {
    margin-top: .9rem;
    padding: 1rem 1.05rem 1.05rem;
    background: var(--sc-color-bg-surface-alt);
    border: 1px solid var(--sc-color-border);
    border-radius: var(--sc-radius-md);
}

.usageHeading {
    font-size: var(--sc-text-xs);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 600;
    color: var(--sc-color-accent);
    margin: 0 0 .55rem;
}

.usageList {
    list-style: none;
    margin: 0 0 1rem;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: .55rem;
}

.usageItem {
    font-size: calc(var(--sc-text-xs) * 1.06);
    line-height: 1.45;
    color: var(--sc-color-text-dim);
    position: relative;
    padding-left: .75rem;
}

.usageItem:before {
    content: '';
    width: 4px;
    height: 4px;
    background: var(--sc-color-accent-strong);
    border-radius: 50%;
    position: absolute;
    left: 0;
    top: 6px;
}

.usageFooterMini {
    font-size: var(--sc-text-sm);
    opacity: .5;
    line-height: 1.25;
}

.selectionIcon {
    width: 68px;
    height: 68px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px #00000080);
}

.selectionIconWrap {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: .35rem;
    margin: .1rem .2rem .1rem 0;
    border-radius: var(--sc-radius-md);
    background: var(--sc-color-bg-surface);
    border: 1px solid var(--sc-color-border);
    box-shadow: 0 2px 8px -2px rgba(0, 0, 0, .35);
}

.metaTags {
    display: flex;
    flex-wrap: wrap;
    gap: .5rem .6rem;
    margin-top: .6rem;
}

.metaTag {
    font-size: calc(var(--sc-text-xs) * 1.05);
    color: var(--sc-color-text);
    background: var(--sc-color-bg-surface-alt);
    border: 1px solid var(--sc-color-border);
    border-radius: 999px;
    padding: .3rem .65rem .34rem;
}
